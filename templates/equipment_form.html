{% extends "base.html" %}
{% block title %}{% if equipment %}Edit{% else %}Add{% endif %} Equipment{% endblock %}
{% block content %}
<h1>{% if equipment %}Edit{% else %}Add New{% endif %} Equipment</h1>
<div class="card">
    <form method="POST">
        <div class="form-row">
            <div class="form-group">
                <label>Equipment ID *</label>
                <input type="text" name="equipment_id" value="{{ equipment.equipment_id if equipment else '' }}" required>
            </div>
            <div class="form-group">
                <label>Name *</label>
                <input type="text" name="name" value="{{ equipment.name if equipment else '' }}" required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Type *</label>
                <select name="equipment_type" required>
                    <option value="">Select type...</option>
                    <option value="Chiller" {% if equipment and equipment.equipment_type == 'Chiller' %}selected{% endif %}>Chiller</option>
                    <option value="Air Conditioner" {% if equipment and equipment.equipment_type == 'Air Conditioner' %}selected{% endif %}>Air Conditioner</option>
                    <option value="Freezer" {% if equipment and equipment.equipment_type == 'Freezer' %}selected{% endif %}>Freezer</option>
                    <option value="Refrigerator" {% if equipment and equipment.equipment_type == 'Refrigerator' %}selected{% endif %}>Refrigerator</option>
                </select>
            </div>
            <div class="form-group">
                <label>Location</label>
                <input type="text" name="location" value="{{ equipment.location if equipment else '' }}">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Refrigerant Type *</label>
                <select name="refrigerant_type" required>
                    <option value="CFC" {% if equipment and equipment.refrigerant_type == 'CFC' %}selected{% endif %}>CFC</option>
                    <option value="HCFC" {% if equipment and equipment.refrigerant_type == 'HCFC' %}selected{% endif %}>HCFC</option>
                    <option value="HFC" {% if equipment and equipment.refrigerant_type == 'HFC' %}selected{% endif %}>HFC</option>
                </select>
            </div>
            <div class="form-group">
                <label>Refrigerant Name *</label>
                <select name="refrigerant_name" required>
                    <option value="R-12" {% if equipment and equipment.refrigerant_name == 'R-12' %}selected{% endif %}>R-12</option>
                    <option value="R-22" {% if equipment and equipment.refrigerant_name == 'R-22' %}selected{% endif %}>R-22</option>
                    <option value="R-134a" {% if equipment and equipment.refrigerant_name == 'R-134a' %}selected{% endif %}>R-134a</option>
                    <option value="R-410A" {% if equipment and equipment.refrigerant_name == 'R-410A' %}selected{% endif %}>R-410A</option>
                </select>
            </div>
            <div class="form-group">
                <label>Full Charge (lbs) *</label>
                <input type="number" step="0.1" name="full_charge" value="{{ equipment.full_charge if equipment else '' }}" required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Install Date</label>
                <input type="date" name="install_date" value="{{ equipment.install_date if equipment else '' }}">
            </div>
            <div class="form-group">
                <label>Leak Rate Threshold (%)</label>
                <input type="number" step="0.1" name="leak_rate_threshold" value="{{ equipment.leak_rate_threshold if equipment else '10.0' }}">
            </div>
            {% if equipment %}
            <div class="form-group">
                <label>Status</label>
                <select name="status">
                    <option value="Active" {% if equipment.status == 'Active' %}selected{% endif %}>Active</option>
                    <option value="Retired" {% if equipment.status == 'Retired' %}selected{% endif %}>Retired</option>
                </select>
            </div>
            {% endif %}
        </div>
        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Save Equipment</button>
            <a href="{{ url_for('equipment_list') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}