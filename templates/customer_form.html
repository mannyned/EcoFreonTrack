{% extends "base.html" %}
{% block title %}{% if customer %}Edit{% else %}Add{% endif %} Customer{% endblock %}
{% block content %}
<h1>{% if customer %}Edit{% else %}Add New{% endif %} Customer</h1>

<div class="card">
    <form method="POST">
        <h3 style="color: #00B4A0; margin-bottom: 1rem;">Company Information</h3>
        <div class="form-row">
            <div class="form-group">
                <label>Company Name *</label>
                <input type="text" name="company_name" value="{{ customer.company_name if customer else '' }}" required>
            </div>
            <div class="form-group">
                <label>Contact Person</label>
                <input type="text" name="contact_person" value="{{ customer.contact_person if customer else '' }}">
            </div>
        </div>

        <h3 style="color: #00B4A0; margin: 1.5rem 0 1rem 0;">Contact Details</h3>
        <div class="form-row">
            <div class="form-group">
                <label>Phone</label>
                <input type="tel" name="phone" value="{{ customer.phone if customer else '' }}">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" value="{{ customer.email if customer else '' }}">
            </div>
        </div>

        <h3 style="color: #00B4A0; margin: 1.5rem 0 1rem 0;">Location</h3>
        <div class="form-group">
            <label>Location/Site Name</label>
            <input type="text" name="location" value="{{ customer.location if customer else '' }}" placeholder="e.g., Main Building, Warehouse #2">
        </div>

        <div class="form-row">
            <div class="form-group" style="flex: 2;">
                <label>Street Address</label>
                <input type="text" name="street_address" value="{{ customer.street_address if customer else '' }}">
            </div>
            <div class="form-group">
                <label>City</label>
                <input type="text" name="city" value="{{ customer.city if customer else '' }}">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>State</label>
                <select name="state">
                    <option value="">Select State</option>
                    <option value="AL" {% if customer and customer.state == 'AL' %}selected{% endif %}>Alabama</option>
                    <option value="AK" {% if customer and customer.state == 'AK' %}selected{% endif %}>Alaska</option>
                    <option value="AZ" {% if customer and customer.state == 'AZ' %}selected{% endif %}>Arizona</option>
                    <option value="AR" {% if customer and customer.state == 'AR' %}selected{% endif %}>Arkansas</option>
                    <option value="CA" {% if customer and customer.state == 'CA' %}selected{% endif %}>California</option>
                    <option value="CO" {% if customer and customer.state == 'CO' %}selected{% endif %}>Colorado</option>
                    <option value="CT" {% if customer and customer.state == 'CT' %}selected{% endif %}>Connecticut</option>
                    <option value="DE" {% if customer and customer.state == 'DE' %}selected{% endif %}>Delaware</option>
                    <option value="FL" {% if customer and customer.state == 'FL' %}selected{% endif %}>Florida</option>
                    <option value="GA" {% if customer and customer.state == 'GA' %}selected{% endif %}>Georgia</option>
                    <option value="HI" {% if customer and customer.state == 'HI' %}selected{% endif %}>Hawaii</option>
                    <option value="ID" {% if customer and customer.state == 'ID' %}selected{% endif %}>Idaho</option>
                    <option value="IL" {% if customer and customer.state == 'IL' %}selected{% endif %}>Illinois</option>
                    <option value="IN" {% if customer and customer.state == 'IN' %}selected{% endif %}>Indiana</option>
                    <option value="IA" {% if customer and customer.state == 'IA' %}selected{% endif %}>Iowa</option>
                    <option value="KS" {% if customer and customer.state == 'KS' %}selected{% endif %}>Kansas</option>
                    <option value="KY" {% if customer and customer.state == 'KY' %}selected{% endif %}>Kentucky</option>
                    <option value="LA" {% if customer and customer.state == 'LA' %}selected{% endif %}>Louisiana</option>
                    <option value="ME" {% if customer and customer.state == 'ME' %}selected{% endif %}>Maine</option>
                    <option value="MD" {% if customer and customer.state == 'MD' %}selected{% endif %}>Maryland</option>
                    <option value="MA" {% if customer and customer.state == 'MA' %}selected{% endif %}>Massachusetts</option>
                    <option value="MI" {% if customer and customer.state == 'MI' %}selected{% endif %}>Michigan</option>
                    <option value="MN" {% if customer and customer.state == 'MN' %}selected{% endif %}>Minnesota</option>
                    <option value="MS" {% if customer and customer.state == 'MS' %}selected{% endif %}>Mississippi</option>
                    <option value="MO" {% if customer and customer.state == 'MO' %}selected{% endif %}>Missouri</option>
                    <option value="MT" {% if customer and customer.state == 'MT' %}selected{% endif %}>Montana</option>
                    <option value="NE" {% if customer and customer.state == 'NE' %}selected{% endif %}>Nebraska</option>
                    <option value="NV" {% if customer and customer.state == 'NV' %}selected{% endif %}>Nevada</option>
                    <option value="NH" {% if customer and customer.state == 'NH' %}selected{% endif %}>New Hampshire</option>
                    <option value="NJ" {% if customer and customer.state == 'NJ' %}selected{% endif %}>New Jersey</option>
                    <option value="NM" {% if customer and customer.state == 'NM' %}selected{% endif %}>New Mexico</option>
                    <option value="NY" {% if customer and customer.state == 'NY' %}selected{% endif %}>New York</option>
                    <option value="NC" {% if customer and customer.state == 'NC' %}selected{% endif %}>North Carolina</option>
                    <option value="ND" {% if customer and customer.state == 'ND' %}selected{% endif %}>North Dakota</option>
                    <option value="OH" {% if customer and customer.state == 'OH' %}selected{% endif %}>Ohio</option>
                    <option value="OK" {% if customer and customer.state == 'OK' %}selected{% endif %}>Oklahoma</option>
                    <option value="OR" {% if customer and customer.state == 'OR' %}selected{% endif %}>Oregon</option>
                    <option value="PA" {% if customer and customer.state == 'PA' %}selected{% endif %}>Pennsylvania</option>
                    <option value="RI" {% if customer and customer.state == 'RI' %}selected{% endif %}>Rhode Island</option>
                    <option value="SC" {% if customer and customer.state == 'SC' %}selected{% endif %}>South Carolina</option>
                    <option value="SD" {% if customer and customer.state == 'SD' %}selected{% endif %}>South Dakota</option>
                    <option value="TN" {% if customer and customer.state == 'TN' %}selected{% endif %}>Tennessee</option>
                    <option value="TX" {% if customer and customer.state == 'TX' %}selected{% endif %}>Texas</option>
                    <option value="UT" {% if customer and customer.state == 'UT' %}selected{% endif %}>Utah</option>
                    <option value="VT" {% if customer and customer.state == 'VT' %}selected{% endif %}>Vermont</option>
                    <option value="VA" {% if customer and customer.state == 'VA' %}selected{% endif %}>Virginia</option>
                    <option value="WA" {% if customer and customer.state == 'WA' %}selected{% endif %}>Washington</option>
                    <option value="WV" {% if customer and customer.state == 'WV' %}selected{% endif %}>West Virginia</option>
                    <option value="WI" {% if customer and customer.state == 'WI' %}selected{% endif %}>Wisconsin</option>
                    <option value="WY" {% if customer and customer.state == 'WY' %}selected{% endif %}>Wyoming</option>
                </select>
            </div>
            <div class="form-group">
                <label>ZIP Code</label>
                <input type="text" name="zip_code" value="{{ customer.zip_code if customer else '' }}" pattern="\d{5}(-\d{4})?" placeholder="12345 or 12345-6789">
            </div>
            {% if customer %}
            <div class="form-group">
                <label>Status</label>
                <select name="status">
                    <option value="Active" {% if customer.status == 'Active' %}selected{% endif %}>Active</option>
                    <option value="Inactive" {% if customer.status == 'Inactive' %}selected{% endif %}>Inactive</option>
                </select>
            </div>
            {% endif %}
        </div>

        <h3 style="color: #00B4A0; margin: 1.5rem 0 1rem 0;">Additional Information</h3>
        <div class="form-group">
            <label>Notes</label>
            <textarea name="notes" rows="4" placeholder="Any additional information about this customer...">{{ customer.notes if customer else '' }}</textarea>
        </div>

        {% if customer and customer.equipment %}
        <div style="background: #F9FAFB; border: 1px solid #E5E7EB; border-radius: 8px; padding: 1rem; margin-top: 1.5rem;">
            <h4 style="color: #111327; margin-bottom: 0.5rem;">Associated Equipment ({{ customer.equipment|length }})</h4>
            <ul style="margin: 0.5rem 0; padding-left: 1.5rem; color: #6B7280;">
                {% for equipment in customer.equipment[:5] %}
                <li>{{ equipment.name }} ({{ equipment.equipment_id }})</li>
                {% endfor %}
                {% if customer.equipment|length > 5 %}
                <li><em>...and {{ customer.equipment|length - 5 }} more</em></li>
                {% endif %}
            </ul>
        </div>
        {% endif %}

        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Save Customer</button>
            <a href="{{ url_for('customer_list') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
