{% extends "base.html" %}
{% block title %}Refrigerant Inventory{% endblock %}
{% block content %}
<h1>Refrigerant Inventory</h1>
<div class="card">
    <h2>Current Stock</h2>
    <table>
        <thead>
            <tr><th>Refrigerant</th><th>Type</th><th>On Hand</th><th>Recovered</th><th>Reorder Level</th><th>Status</th><th>Action</th></tr>
        </thead>
        <tbody>
            {% for item in inventory %}
            <tr>
                <td><strong>{{ item.refrigerant_name }}</strong></td>
                <td>{{ item.refrigerant_type }}</td>
                <td>{{ item.quantity_on_hand }} lbs</td>
                <td>{{ item.quantity_recovered }} lbs</td>
                <td>{{ item.reorder_level }} lbs</td>
                <td><span class="badge badge-{{ 'success' if item.quantity_on_hand >= item.reorder_level else 'warning' }}">
                    {{ 'OK' if item.quantity_on_hand >= item.reorder_level else 'Low' }}</span></td>
                <td>
                    <form method="POST" action="{{ url_for('inventory_adjust', id=item.id) }}" class="d-flex gap-1">
                        <input type="number" step="0.1" name="adjustment" placeholder="Â±" style="width:80px" required>
                        <button type="submit" class="btn btn-sm btn-primary">Adjust</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="card">
    <h2>Recent Transactions</h2>
    <table>
        <thead>
            <tr><th>Date</th><th>Type</th><th>Refrigerant</th><th>Quantity</th><th>Equipment</th></tr>
        </thead>
        <tbody>
            {% for t in transactions %}
            <tr>
                <td>{{ t.transaction_date }}</td>
                <td><span class="badge badge-{{ 'success' if t.transaction_type == 'Purchase' else 'info' }}">{{ t.transaction_type }}</span></td>
                <td>{{ t.refrigerant_name }}</td>
                <td>{{ t.quantity }} lbs</td>
                <td>{{ t.equipment.equipment_id if t.equipment else 'N/A' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}